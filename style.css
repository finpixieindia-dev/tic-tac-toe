:root{
  --bg1:#0f1225;
  --bg2:#1a2650;
  --fg:#e9ecfa;
  --muted:#b7c0ff;
  --accent:#7aa2ff;
  --x:#78e08f;
  --o:#ff7675;
  --glass: rgba(255,255,255,.08);
  --glass-b: rgba(255,255,255,.18);
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}
html,body{height:100%;}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--fg);
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  overflow-x:hidden;
}

.bg{
  position:fixed; inset:-20vmax;
  background:
    radial-gradient(40vmax 40vmax at 10% 20%, rgba(122,162,255,.18), transparent 60%),
    radial-gradient(50vmax 50vmax at 80% 10%, rgba(120,224,143,.18), transparent 60%),
    radial-gradient(60vmax 60vmax at 30% 90%, rgba(255,118,117,.18), transparent 60%);
  filter: blur(45px) saturate(120%);
  pointer-events:none; z-index:0;
  animation: float 16s ease-in-out infinite alternate;
}
@keyframes float{to{transform: translate3d(2vw,-2vh,0) scale(1.02)}}

.app{position:relative; z-index:1; padding:18px; max-width:1000px; margin:0 auto;}
.topbar{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;}
h1{margin:0; font-weight:800; letter-spacing:.3px}
.right-actions{display:flex; gap:8px}

.tabs{display:flex; gap:8px; margin:8px 0 14px}
.tab{
  appearance:none; border:none; padding:10px 14px; border-radius:999px;
  background:var(--glass); color:var(--fg); cursor:pointer; backdrop-filter: blur(8px);
  box-shadow: var(--shadow);
}
.tab.active{background:var(--glass-b); font-weight:700; outline:2px solid var(--accent)}

.content{display:grid; grid-template-columns: 280px 1fr; gap:16px}
@media (max-width:900px){ .content{grid-template-columns:1fr} }

.card.glass{
  background:var(--glass); border:1px solid rgba(255,255,255,.15);
  border-radius:18px; padding:12px; box-shadow: var(--shadow); backdrop-filter: blur(10px);
}
.small{font-size:.9rem; color:var(--muted)}
.info pre{white-space:pre-wrap; word-break:break-word; font-size:.8rem; color:var(--muted)}

.scoreboard .row{display:flex; align-items:center; justify-content:space-between; margin:8px 0}
.pill{font-weight:800; padding:6px 10px; border-radius:12px; background:var(--glass-b)}
.pill.x{outline:2px solid var(--x)}
.pill.o{outline:2px solid var(--o)}
.pill.t{outline:2px solid var(--accent)}
.score-val{font-weight:800; font-size:1.3rem}

.status{margin-top:10px}
.controls{display:flex; gap:8px; margin-top:10px}
.options{margin-top:10px}
.row{display:flex; align-items:center; gap:10px}
.row.between{justify-content:space-between}
.wrap{flex-wrap:wrap}
.g8{gap:8px}

.board-wrap{display:flex; flex-direction:column; gap:12px; align-items:center}
.board{
  width:min(92vmin,520px);
  height:min(92vmin,520px);
  display:grid; grid-template-columns:repeat(3,1fr); gap:12px; padding:12px;
  border-radius:24px; position:relative;
}
.cell{
  aspect-ratio:1/1; border-radius:18px; border:1px dashed rgba(255,255,255,.25);
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
  box-shadow: var(--shadow); font-size: clamp(36px, 10vmin, 92px);
  color:var(--fg); font-weight:800; cursor:pointer; display:flex; align-items:center; justify-content:center;
  transition: transform .12s ease, background .2s ease;
}
.cell:hover{transform: translateY(-2px) scale(1.02)}
.cell:disabled{opacity:.85; cursor:not-allowed}
.cell.X{color:var(--x); text-shadow:0 6px 20px rgba(120,224,143,.35)}
.cell.O{color:var(--o); text-shadow:0 6px 20px rgba(255,118,117,.35)}
.cell.win{outline:3px solid var(--accent); animation: pop .35s ease}
@keyframes pop{from{transform:scale(.9)} to{transform:scale(1)}}

.panels{width:100%; display:grid}
.panel{display:none}
.panel.active{display:block}

.btn{
  border:none; padding:10px 14px; border-radius:14px; background:var(--glass-b); color:var(--fg);
  cursor:pointer; box-shadow: var(--shadow); backdrop-filter: blur(6px); font-weight:600;
}
.btn.primary{background: linear-gradient(135deg,var(--accent), #9bb8ff); color:#101327}
.btn.ghost{background:transparent; outline:1px solid rgba(255,255,255,.25)}
.btn:active{transform: translateY(1px)}

.input{
  flex:1 1 160px; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.2); color:var(--fg); min-width:160px
}

.warn{color:#ffd166}
.hidden{display:none}

.ad-banner{
  position:fixed; left:12px; right:12px; bottom:12px; text-align:center; padding:10px;
  border-radius:16px; font-weight:700;
}

dialog#interstitial::backdrop{background: rgba(0,0,0,.55)}
.ad-modal{min-width:min(92vw,480px)}
.ad-header{font-weight:800; margin-bottom:8px}
.ad-body{display:flex; justify-content:center; align-items:center; padding:16px 0}
.ad-box{
  width:min(86vw,320px); height:280px; border-radius:16px; border:2px dashed rgba(255,255,255,.35);
  display:flex; align-items:center; justify-content:center; font-weight:800; opacity:.9
}

/* Light theme */
.light{
  --bg1:#eef2ff; --bg2:#dbe6ff; --fg:#171a2a; --muted:#49558f; --glass:rgba(255,255,255,.7);
  --glass-b:rgba(255,255,255,.9); --shadow: 0 6px 20px rgba(20,33,66,.15);
}
